---
title: "diamonds demo"
author: "Sarah Hosking"
date: "March 7, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(lubridate)
library(tidyverse)
library(GGally)

library(reshape2) #plot missing vals

theme_set(theme_bw())

```

Let's load some sample data

```{r load diamonds}

data(diamonds)
dim(diamonds)
```

```{r}

# data layer
p <- ggplot(data = diamonds)
p
  
```

```{r}

# data layer
p <- ggplot(data = diamonds, aes(x = carat, y = price))
p
  
```




```{r}

# specify the kind of plot
p + 
  geom_point()

```

```{r}
p <- p + 
  geom_point(alpha = 1/10)
p


```


```{r}

p + 
  geom_smooth()

```


```{r}

# use visual elements (aesthetics) to distinguish groups

p <- p + 
  aes(colour = clarity)
p


```

```{r}

p + 
  geom_smooth(se = FALSE)
  


```

```{r}
p <- p + 
  geom_smooth(se = FALSE, color = 'black') + 
  facet_wrap(~clarity, nrow = 2)
p
  
```



```{r}

# change the scale

p + 
  scale_y_log10()

```


```{r}

# and create a grid of facts
p + 
  scale_y_log10() +
  facet_grid(color ~ cut)

```

That's not terribly helpful

```{r}

# use jitter instead
p +
  geom_jitter(aes(color = clarity)) +
  scale_y_log10() + 
  facet_grid(cut ~ color)
  
  

```




## The grammar

*data + aesthetics + geom*

All ggplot plots consist of:

* data: a dataframe

* an aesthetic layer: maps variables to plot aesthetics (x, y, colour, shape, fill, etc)

* a geom layer: the coordinate system that guides how variable values are plotted (geom_histogram, geom_bar, geom_density, geom_point, geom_line etc).



```{r}

p <- ggplot(data = diamonds, aes(x = color, y = price))

p + 
  geom_boxplot()


```

As with speaking, you can combine change the order of the grammar objects

```{r}

ggplot(data = diamonds) + 
  geom_boxplot(aes(x = color, y = price))

```

```{r}

ggplot(diamonds) +
  geom_boxplot() +
  aes(color, price)

```


This flexibility makes it easy to iterate.


```{r}
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
